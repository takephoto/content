package com.example.test;

import java.util.ArrayList;
import java.util.List;
import java.util.Set;

import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.Switch;
import android.widget.TextView;

import com.example.bluedemo.R;


public class MainActivity extends Activity {
	
	private BluetoothAdapter myBlueAdapter = null;
	
	private TextView blueToothInfo = null;
	
	private Spinner deviceNames = null ;
	
	private Switch openBlueTooth = null ;
	@Override
	protected void onCreate(Bundle savedInstanceState) {
		// TODO Auto-generated method stub
		super.onCreate(savedInstanceState);
		setContentView(R.layout.main) ;
		openBlueTooth = (Switch) findViewById(R.id.bluetooth_info) ;
		deviceNames = (Spinner) findViewById(R.id.spinner1) ;
		blueToothInfo = (TextView) findViewById(R.id.bluetooth_info) ;
		myBlueAdapter = BluetoothAdapter.getDefaultAdapter() ;
		
		blueToothInfo.setText(getBlueDeviceAllInfo(myBlueAdapter)) ;
		
		Set<BluetoothDevice> bondDevices = myBlueAdapter.getBondedDevices() ;
		
		List<String> allBondDevNames = new ArrayList<String>() ;
		for(BluetoothDevice devices : bondDevices){
			allBondDevNames.add(devices.getName()) ;
		}
		deviceNames.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_spinner_dropdown_item, allBondDevNames)) ; 
	}
	/*
	 * 
	 */
	public String getBlueDeviceAllInfo(BluetoothAdapter blueAdapter){
		StringBuilder info = new StringBuilder() ;
		info.append("address:") ;
		info.append(blueAdapter.getAddress()+"\n") ;
		info.append("Name:") ;
		info.append(blueAdapter.getName()+"\n") ;
		info.append("scanMode:") ;
		info.append(blueAdapter.getScanMode()+"\n") ;
		info.append("state:") ;
		info.append(blueAdapter.getState()+"\n") ;
		return info.toString() ;	
	}
}
